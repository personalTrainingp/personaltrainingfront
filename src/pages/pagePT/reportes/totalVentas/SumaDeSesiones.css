/* ================= VARIABLES BASE ================= */
.tabla-sesiones{
  --accent-red: red;
  --text-red: #c00000;
  --tri-cols: 4;
  border-collapse: collapse;
  
}
.tabla-sesiones.with-traspasos{ --tri-cols: 4; }

/* ================= BORDES Y CELDAS BASE ================= */
.tabla-sesiones th,
.tabla-sesiones td{
  border: 1px solid #000 !important;
  box-sizing: border-box;
}

.tabla-sesiones :is(th.triptych-head, td.triptych){
  position: relative;
  overflow: visible;
  width: 90px; min-width: 90px; max-width: 100px;
  padding: 0;
}
.tabla-sesiones th.triptych-head{ height: 45px; }

/* Grids internos (4 columnas) */
.tabla-sesiones th.triptych-head > .tri-box-head,
.tabla-sesiones td.triptych > .tri-box{
  position: relative;           /* necesario para el ::before */
  display: grid;
  grid-template-columns: repeat(var(--tri-cols), 1fr);
  height: 100%;
  background: #fff;             /* mantenemos el fondo */
}

/* ================= THEAD (bg rojo restaurado) ================= */
.tabla-sesiones thead th.triptych-head{ background: #c00000 !important; }
.tabla-sesiones thead th.triptych-head > .tri-box-head{ background: #c00000 !important; }
.tabla-sesiones thead th.triptych-head .miniTitle{ color:#fff !important; }

/* Tus columnas específicas con fondo rojo en THEAD */
.tabla-sesiones :is(
  thead tr > th:nth-child(1),
  thead tr > th:nth-child(6),
  thead tr > th:nth-child(7),
  thead tr > th:nth-child(8)
){
  background: #c00000 !important;
  color: #fff !important;
}

.tabla-sesiones th.triptych-head > .tri-box-head > div{
  display:flex; align-items:center; justify-content:center;
}
.miniTitle{ font-weight:800; font-size:15px; letter-spacing:.3px; margin:0; }

/* Quitar pseudo-divisores antiguos */
.tabla-sesiones :is(td.triptych)::before,
.tabla-sesiones :is(td.triptych)::after,
.tabla-sesiones :is(th.triptych-head, td.triptych)::before,
.tabla-sesiones :is(th.triptych-head, td.triptych)::after{
  content:none !important;
}

/* ================= SUBCELDAS (NUEVOS/RENOV/REINSC/COSTO0) ================= */
.tri-box-head > div,
.tri-box > div{
  display:flex; align-items:center; justify-content:center;
}

/* Bordes rojos internos para cada número */
.tri-box > div{ border-left: 2px solid var(--accent-red); }
.tri-box > div:first-child{ border-left: 0; }


.tabla-sesiones td.img-with-name .img-cap{
  position:relative; display:flex; flex-direction:column;
  align-items:center; justify-content:center; gap:.5rem; padding:.25rem 0;
}
.tabla-sesiones td.img-with-name .img-cap img{
  width:80px; height:100px; border-radius:10px; object-fit:cover; background:#f3f3f3;
}
.tabla-sesiones td.img-with-name .cap{ font-weight:800; font-size:20px; text-align:center; }
.tabla-sesiones td.img-with-name.only-text .cap{
  font-size:22px; line-height:3.1; padding:8px 4px;
  white-space:normal!important; word-break:break-word!important; text-align:center; font-weight:800;
}

/* ================= TROFEO ================= */
.tabla-sesiones .copa-champions{ position:absolute; top:5px; left:-10px; z-index:3; }
.tabla-sesiones .copa-champions img{
  width:70px; filter:brightness(1.1) contrast(1.3) drop-shadow(0 2px 3px rgba(0,0,0,.4));
}

/* ================= TEXTO INTERNO ================= */
.tabla-sesiones td.triptych > .tri-box > div p{
  margin:0; padding:2px 0; font-size:17px; font-weight:400;
}

/* ================= ESTILOS DE TOTAL/SECUNDARIA ================= */
.tabla-sesiones.table > :not(caption) > * > *.fw-bold{ color: var(--text-red) !important; }
.tabla-sesiones.table > tbody > tr.fila-total > td:not(.img-with-name){
  color: var(--text-red) !important; font-weight:800;
}

/* Fila secundaria: primera celda invertida */
.tabla-sesiones tbody tr.fila-secundaria td.img-with-name{
  background:#c00000 !important; color:#fff !important;
}

/* Banda roja superior/inf. de TOTAL */
.tabla-sesiones tbody tr.fila-total{
  position:relative;
  box-shadow: inset 0 2px 0 var(--accent-red), inset 0 -2px 0 var(--accent-red);
}

/* ================= MODO COMPACTO (SOCIOS POR CANAL) ================= */
.fila-secundaria.compact td,
.fila-secundaria.compact td *{
  font-size:29px !important; line-height:1.1 !important;
}
.fila-secundaria.compact td{ padding:14px 16px !important; }
.fila-secundaria.compact .img-with-name .cap{
  font-size:22px !important; line-height:1.5 !important; margin:0 !important;
}

/* 4 columnas siempre y bordes rojos internos también aquí */
.fila-secundaria.compact .triptych{ padding:0 !important; }
.fila-secundaria.compact .tri-box{
  display:grid !important; grid-template-columns:repeat(var(--tri-cols),1fr) !important; gap:2px !important;
}
.fila-secundaria.compact .tri-box > div{
  padding:0 !important; border-left:2px solid var(--accent-red);
}
.fila-secundaria.compact .tri-box > div:first-child{ border-left:0; }
/* Borde rojo continuo en cada columna de programa */
.tabla-sesiones td.program-start,
.tabla-sesiones th.program-start {
  border-left: 2px solid var(--accent-red) !important;
}

.tabla-sesiones td.program-end,
.tabla-sesiones th.program-end {
  border-right: 2px solid var(--accent-red) !important;
}
.tabla-sesiones :is(th.triptych-head, td.triptych){
  --step: calc(100% / var(--tri-cols)); /* con --tri-cols:4 */
  background-image:
    linear-gradient(to right,
      transparent calc(var(--step) - 1px),
      var(--accent-red) calc(var(--step) - 1px),
      var(--accent-red) calc(var(--step) + 1px),
      transparent calc(var(--step) + 1px),

      transparent calc(calc(var(--step) * 2) - 1px),
      var(--accent-red) calc(calc(var(--step) * 2) - 1px),
      var(--accent-red) calc(calc(var(--step) * 2) + 1px),
      transparent calc(calc(var(--step) * 2) + 1px),

      transparent calc(calc(var(--step) * 3) - 1px),
      var(--accent-red) calc(calc(var(--step) * 3) - 1px),
      var(--accent-red) calc(calc(var(--step) * 3) + 1px),
      transparent calc(calc(var(--step) * 3) + 1px)
    );
  background-size: 100% 100%;
  background-repeat: no-repeat;
}

/* Mantén el grid de 4, pero sin bordes internos para no duplicar líneas */
.tri-box-head > div,
.tri-box > div{
  display:flex; align-items:center; justify-content:center;
}

.tri-box > div{ border-left: 0 !important; }
.fila-secundaria.compact .tri-box > div{ border-left: 0 !important; }

/* Borde rojo perimetral de cada columna-programa (de arriba a abajo) */
.tabla-sesiones :is(td.program-start, th.program-start){
  border-left: 2px solid var(--accent-red) !important;
}
.tabla-sesiones :is(td.program-end, th.program-end){
  border-right: 2px solid var(--accent-red) !important;
}
.tabla-sesiones :is(.tri-box, .tri-box-head)::before{
  content: "";
  position: absolute;
  inset: 0;                     /* cubre todo el alto y ancho */
  pointer-events: none;
  --step: calc(100% / var(--tri-cols)); /* con --tri-cols:4 */
  background-image:
    linear-gradient(to right,
      transparent calc(var(--step) - 1px),
      var(--accent-red) calc(var(--step) - 1px),
      var(--accent-red) calc(var(--step) + 1px),
      transparent calc(var(--step) + 1px),

      transparent calc(2*var(--step) - 1px),
      var(--accent-red) calc(2*var(--step) - 1px),
      var(--accent-red) calc(2*var(--step) + 1px),
      transparent calc(2*var(--step) + 1px),

      transparent calc(3*var(--step) - 1px),
      var(--accent-red) calc(3*var(--step) - 1px),
      var(--accent-red) calc(3*var(--step) + 1px),
      transparent calc(3*var(--step) + 1px)
    );
  background-size: 100% 100%;
  background-repeat: no-repeat;
  z-index: 0;                   /* por debajo del contenido */
}



/*OTRA VISTA*/

/* avatar-col: sin subdivisiones */
.tabla-sesiones th.avatar-col::before,
.tabla-sesiones th.avatar-col::after{ display:none !important; }

/* ================== Ranking (scopeado) ================== */
.ranking-card .rank-avatar{ position:relative; display:inline-flex; align-items:center; justify-content:center; width:140px; height:100px; overflow:hidden; }
.ranking-card .rank-avatar .avatar{ width:90px; height:90px; object-fit:cover; border-radius:8px; background:#f3f3f3; }
.ranking-card .copa-champions{ position:absolute; top:5px; left:-10px; z-index:3; }
.ranking-card .copa-champions img{ width:65px; height:75px; filter:brightness(1.1) contrast(1.3) drop-shadow(0 2px 3px rgba(0,0,0,.4)); mix-blend-mode:darken; }
.ranking-card .table-centered :is(thead th:nth-child(2), tbody td:nth-child(2)){ width:160px; }
.ranking-card .rank-img-cell{ width:170px; min-width:170px; padding:8px 12px; vertical-align:middle; }
.ranking-card .rank-img-cell .img-cap{ position:relative; display:flex; align-items:center; justify-content:center; gap:.5rem; height:110px; }
.ranking-card .rank-img-cell .avatar{ width:90px; height:110px; border-radius:10px; object-fit:cover; background:#f3f3f3; }

/* util */
.tabla-sesiones .is-bold{ font-weight:800; }
